import{d as _,r as d,k as x,l as y,a as p,o as v,w as l,f as s,n as k,p as V,b as i,q as C,s as T,v as A,x as B,y as f,z as S,e as U,t as g,A as q,B as E}from"./popup.js";const M=_({__name:"AuthForm",setup(F){const u=d("login"),r=d(""),n=d(""),t=d(""),m=x(),c=[e=>!!e||"Email обязателен",e=>/.+@.+\..+/.test(e)||"Email должен быть валидным"],b=[e=>!!e||"Пароль обязателен",e=>e.length>=6||"Пароль должен быть не менее 6 символов"];y(()=>{console.log(1)});const w=async()=>{if(t.value="",u.value==="login"){const e=await m.signIn(r.value,n.value);e.success||(t.value=e.error||"Ошибка входа")}else{const e=await m.signUp(r.value,n.value);e.success?t.value="Проверьте вашу почту для подтверждения!":t.value=e.error||"Ошибка регистрации"}};return(e,a)=>(v(),p(E,{"max-width":"500",class:"mx-auto"},{default:l(()=>[s(k,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=o=>u.value=o),grow:""},{default:l(()=>[s(V,{value:"login"},{default:l(()=>a[3]||(a[3]=[i("Вход")])),_:1,__:[3]}),s(V,{value:"register"},{default:l(()=>a[4]||(a[4]=[i("Регистрация")])),_:1,__:[4]})]),_:1},8,["modelValue"]),s(C,null,{default:l(()=>[s(T,{onSubmit:A(w,["prevent"])},{default:l(()=>[s(f,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=o=>r.value=o),rules:c,label:"Email",type:"email",required:""},null,8,["modelValue"]),s(f,{modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=o=>n.value=o),rules:b,class:"mt-4",label:"Пароль",type:"password",required:""},null,8,["modelValue"]),s(S,{type:"submit",color:"primary",block:"",loading:U(m).isLoading},{default:l(()=>[i(g(u.value==="login"?"Войти":"Зарегистрироваться"),1)]),_:1},8,["loading"]),t.value?(v(),p(q,{key:0,type:"error",class:"mt-4"},{default:l(()=>[i(g(t.value),1)]),_:1})):B("",!0)]),_:1})]),_:1})]),_:1}))}});export{M as default};
